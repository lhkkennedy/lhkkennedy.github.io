<!doctype html>

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <link rel="stylesheet" href="css/myStyle.css" />
   <link rel="stylesheet" href="css/parallax.css" />
   <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
   <!-- Vega JavaScript -->
   <script src="https://cdn.jsdelivr.net/npm/vega@5.21.0"></script>
   <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.2.0"></script>
   <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.20.2"></script>
</head>

<body>
   <!-- NAVBAR -->
   <div id="navbar">
      <a class="navbtn" href="#home">Home</a>
      <a href="/Debt/projectpage.html">Project</a>
      <a href="#contact">Profile</a>
   </div>
   <!-- START OF PARALLAX CONTENT -->
   <div class="parallax" id="parallax">
      <div class="parallax__group">
         <!-- Background Slider -->
         <div class="parallax__layer parallax__layer--deep">
            <!-- Background Slider -->
            <section class="sect-banner">
               <ul class="kf-slider">
                  <li></li>
                  <li></li>
                  <li></li>
               </ul>
            </section>
         </div>
         <!-- Vertically Centered Title Content -->
         <div class="parallax__layer parallax__layer--back">
            <section class="sect-banner">
               <div class="v-center">
                  <h1>Data Science Blog</h1>
                  <p>Profiling the skills learnt on my university course</p>
               </div>
            </section>
         </div>
         <!-- Start of Content List -->
         <div class="parallax__layer parallax__layer--base">
            <!-- Grid -->
            <div class="content-grid">
               <div class="row">
                  <!-- Blog entries -->
                  <div class="col-blogEntry">
                     <!-- Blog entry 1 -->
                     <a name="anchor-1-Embedding"></a>
                     <div class="card-blogEntry">
                        <img class="blog-thumbnail" src="images/1_Embedding.jpg" alt="UK COVID Heat Graph">
                        <div class="blog-details">
                           <h3><b>Embedding Data</b></h3>
                           <h5>Week 2, <span class="date">4th October, 2021</span></h5>
                        </div>
                        <div class="blog-description">
                           <strong>Tasks:</strong>
                           <p>Embed two charts that were given in class.</p>
                           <p>Embed one taken from the repository of charts on rapidcharts.io.</p>
                           <a class="button js-cd-panel-trigger" data-panel="1-Embedding"><b>SEE CHARTS
                                 »</b></a>
                        </div>
                     </div>
                     <hr>
                     <!-- Blog entry 2 -->
                     <a name="anchor-2-Hosting"></a>
                     <div class="card-blogEntry">
                        <img class="blog-thumbnail" src="images/2_Hosting_Data.jpg" alt="UK COVID Regional Line Chart">
                        <div class="blog-details">
                           <h3><b>Hosting Data</b></h3>
                           <h5>Week 3, <span class="date">11th October, 2021</span></h5>
                        </div>
                        <div class="blog-description">
                           <strong>Tasks:</strong>
                           <p>Embed two charts of own design</p>
                           <p>a) from a given API</p>
                           <p>b) from the same/related data saved to my GitHub</p>
                           <a class="button js-cd-panel-trigger" data-panel="2-Hosting"><b>SEE CHARTS
                                 >></b></a>
                        </div>
                     </div>
                     <hr>
                     <!-- Blog entry 3 -->
                     <a name="anchor-3-Editing"></a>
                     <div class="card-blogEntry">
                        <img class="blog-thumbnail" src="images/3_Editing_Data.jpg" alt="">
                        <div class="blog-details">
                           <h3><b>Editing Data</b></h3>
                           <h5>Week 4, <span class="date">18th October, 2021</span></h5>
                        </div>
                        <div class="blog-description">
                           <strong>Tasks:</strong>
                           <p>a) Embed one chart where the data is edited (add observation, add a series,
                              create a new series).
                           </p>
                           <p>b) Embed a chart where the data is 'in-line' JSON. Minimum 5 observations.</p>
                           <a class="button js-cd-panel-trigger" data-panel="3-Editing"><b>SEE CHARTS
                                 >></b></a>
                        </div>
                     </div>
                     <hr>
                     <!-- Blog entry 4 -->
                     <a name="anchor-4-API"></a>
                     <div class="card-blogEntry">
                        <img class="blog-thumbnail" src="images/4_API.jpg" alt="">
                        <div class="blog-details">
                           <h3><b>API driven charts</b></h3>
                           <h5>Week 5, <span class="date">25th October, 2021</span></h5>
                        </div>
                        <div class="blog-description">
                           <strong>Tasks:</strong>
                           <p>Embed two charts from two seperate APIs that you sign up for & gain access to.
                           </p>
                           <a class="button js-cd-panel-trigger" data-panel="4-API"><b>SEE CHARTS >></b></a>
                        </div>
                     </div>
                     <hr>
                     <!-- Blog entry 5 -->
                     <a name="anchor-5-Loops"></a>
                     <div class="card-blogEntry">
                        <img class="blog-thumbnail" src="images/5_Loops.jpg" alt="">
                        <div class="blog-details">
                           <h3><b>Loops and APIs</b></h3>
                           <h5>Week 6, <span class="date">1st November, 2021</span></h5>
                        </div>
                        <div class="blog-description">
                           <strong>Tasks:</strong>
                           <p>Use a loop to batch download data.</p>
                           <p>Download code from an API using fetch in Python and chart data.</p>
                           <a class="button js-cd-panel-trigger" data-panel="5-Loops"><b>SEE CHARTS >></b></a>
                        </div>
                     </div>
                     <hr>
                     <!-- Blog entry 6 -->
                     <a name="anchor-6-Scraper"></a>
                     <div class="card-blogEntry">
                        <img class="blog-thumbnail" src="images/6_Scraper.jpg" alt="">
                        <div class="blog-details">
                           <h3><b>Scraping Data</b></h3>
                           <h5>Week 7, <span class="date">8th November, 2021</span></h5>
                        </div>
                        <div class="blog-description">
                           <strong>Tasks:</strong>
                           <p>Build a scraper in Python.</p>
                           <p>Save and chart the results.</p>
                           <a class="button js-cd-panel-trigger" data-panel="6-Scraper"><b>SEE CHARTS
                                 >></b></a>
                        </div>
                     </div>
                     <hr>
                     <!-- Blog entry 7 -->
                     <a name="anchor-7-Data-Stories"></a>
                     <div class="card-blogEntry">
                        <img class="blog-thumbnail" src="images/7_Data_Stories.jpg" alt="">
                        <div class="blog-details">
                           <h3><b>Data Stories</b></h3>
                           <h5>Week 8, <span class="date">15th November, 2021</span></h5>
                        </div>
                        <div class="blog-description">
                           <strong>Tasks:</strong>
                           <p>Attend one morning of Talking Economics and construct a chart that would:</p>
                           <p>a) support or</p>
                           <p>b) refute an argument made.</p>
                           <a class="button js-cd-panel-trigger" data-panel="7-Stories"><b>SEE CHARTS
                                 >></b></a>
                        </div>
                     </div>
                     <hr>
                     <!-- Blog entry 8 -->
                     <a name="anchor-8-Analytics"></a>
                     <div class="card-blogEntry">
                        <img class="blog-thumbnail" src="images/8_Advanced_Analytics.jpg" alt="">
                        <div class="blog-details">
                           <h3><b>Advanced Analystics</b></h3>
                           <h5>Week 9, <span class="date">22nd November, 2021</span></h5>
                        </div>
                        <div class="blog-description">
                           <strong>Tasks:</strong>
                           <p>a) Build a chart with data from two seperate sources.</p>
                           <p>b) Plot using correlation, regressions or some other technique.</p>
                           <p>c) Build and embed a chart that uses advanced statistical methods testing
                              causality or distribution.
                           </p>
                           <a class="button js-cd-panel-trigger" data-panel="8-Advanced"><b>SEE CHARTS
                                 >></b></a>
                        </div>
                     </div>
                     <hr>
                     <!-- Blog entry 9 -->
                     <a name="anchor-9-Interactivity"></a>
                     <div class="card-blogEntry">
                        <img class="blog-thumbnail" src="images/9_Interactivity.jpg" alt="">
                        <div class="blog-details">
                           <h3><b>Interactivity</b></h3>
                           <h5>Week 10, <span class="date">29th November, 2021</span></h5>
                        </div>
                        <div class="blog-description">
                           <strong>Tasks:</strong>
                           <p>Build and embed two interactive charts</p>
                           <a class="button js-cd-panel-trigger" data-panel="9-Interactivity"><b>SEE CHARTS
                                 >></b></a>
                        </div>
                     </div>
                     <hr>
                     <!-- END BLOG ENTRIES -->
                  </div>
                  <!-- Introduction Menu -->
                  <div class="intro-menu">
                     <!-- About Card -->
                     <div class="intro-card">
                        <div class="intro-card-heading">
                           <h4><b>My Data Science Course</b></h4>
                        </div>
                        <div class="about-card-text">
                           <img class="profile-img" src="images/paranormal distribution.jpg">
                           <p>Just me, myself and I, exploring the universe of uknownment. I have a heart of
                              love and a interest of lorem ipsum and mauris neque quam blog. I want to share
                              my world with you.
                           </p>
                        </div>
                     </div>
                     <hr>
                     <!-- Posts -->
                     <div class="intro-card list">
                        <div class="intro-card-heading">
                           <h4><b>Top Posts</b></h4>
                        </div>
                        <ul class="ul-posts hoverable">
                           <li>
                              <a href="#anchor-1-Embedding">
                                 <img src="images/1_Embedding.jpg" alt="Image">
                                 <p>Embedding</p>
                                 <p>Week 2</p>
                              </a>
                           </li>
                           <li>
                              <a href="#anchor-2-Hosting">
                                 <img src="images/2_Hosting_Data.jpg" alt="Image">
                                 <p>Hosting</p>
                                 <p>Week 3</p>
                              </a>
                           </li>
                           <li>
                              <a href="#anchor-3-Editing">
                                 <img src="images/3_Editing_Data.jpg" alt="Image">
                                 <p>Editing</p>
                                 <p>Week 4</p>
                              </a>
                           </li>
                           <li>
                              <a href="#anchor-4-API">
                                 <img src="images/4_API.jpg" alt="Image">
                                 <p>API</p>
                                 <p>Week 5</p>
                              </a>
                           </li>
                           <li>
                              <a href="#anchor-5-Loops">
                                 <img src="images/5_Loops.jpg" alt="Image">
                                 <p>Loops</p>
                                 <p>Week 6</p>
                              </a>
                           </li>
                           <li>
                              <a href="#anchor-6-Scraper">
                                 <img src="images/6_Scraper.jpg" alt="Image">
                                 <p>Scraper</p>
                                 <p>Week 7</p>
                              </a>
                           </li>
                           <li>
                              <a href="#anchor-7-Data-Stories">
                                 <img src="images/7_Data_Stories.jpg" alt="Image">
                                 <p>Data Stories</p>
                                 <p>Week 8</p>
                              </a>
                           </li>
                           <li>
                              <a href="#anchor-8-Analytics">
                                 <img src="images/8_Advanced_Analytics.jpg" alt="Image">
                                 <p>Advanced Analystics</p>
                                 <p>Week 9</p>
                              </a>
                           </li>
                           <li>
                              <a href="#anchor-9-Interactivity">
                                 <img src="images/9_Interactivity.jpg" alt="Image">
                                 <p>Interactivity</p>
                                 <p>Week 10</p>
                              </a>
                           </li>
                        </ul>
                     </div>
                     <!-- Labels / tags -->
                     <div class="intro-card">
                        <div class="intro-card-heading">
                           <h4><b>Tags</b></h4>
                        </div>
                        <div class="about-card-text">
                           <p>
                              <a class="tag-button">HTML</a>
                              <a class="tag-button">CSS</a>
                              <a class="tag-button">API</a>
                              <a class="tag-button">Data Science</a>
                              <a class="tag-button">Charts</a>
                           </p>
                        </div>
                     </div>
                     <!-- End of Intro Menu -->
                  </div>
                  <!-- End of Row -->
               </div>
               <!-- End of Grid-->
            </div>
            <!-- Footer -->
            <footer class="page-footer">
               <button class="button-footer">« Previous</button>
               <button class="button-footer">Next »</button>
               <p>All References Here: <a href="html/reference_page.html">Link</a></p>
            </footer>
            <!-- End of Parallax Base Layer-->
         </div>
         <!-- End of Parallax Group -->
      </div>
      <!-- End of Parallax -->
   </div>
   <!-- 1. Embedding Panel -->
   <div class="cd-panel cd-panel--from-right js-cd-panel-1-Embedding">
      <header class="cd-panel__header">
         <h1>1. Embedding Data</h1>
         <a href="#0" class="cd-panel__close js-cd-close">Close</a>
      </header>
      <div class="cd-panel__container">
         <div class="cd-panel__content">
            <div class="col-blogEntry panel">
               <!-- Blog entry 1 -->
               <div class="card-blogEntry panel">
                  <div id="firstChart" class="chart center">
                     <script>
                        var myChart1 = "html/json/1_Embedding/chart1_covidUKRegions.json";
                        vegaEmbed('#firstChart', myChart1);
                     </script>
                  </div>
                  <div class="blog-details">
                     <h3><b>Example Graph 1</b></h3>
                  </div>
                  <div class="blog-description">
                     <h5>Given to show how to use vega to display graph <br>
                        <span class="date">4th October, 2021</span>
                     </h5>
                     <h6>After starting our GitHub repositories and pages where we will host all of our charts for the
                        profile. Each will represent a different skill crucial to data science.
                        This week we learn the basics of manipulating html and css to embed charts that have been
                        already coded in json. The html page uses scripts from vega vega-lite and vega-embed to create
                        visualisations from a json spec. Data can be imported from a url to an API or hosted locally in
                        a seperate file.
                        This first graph imports data directly from the UK gov coronavirus API and as such updates on
                        reload whenever new data is available to fetch.
                     </h6>
                  </div>
               </div>
               <hr>
               <!-- Blog entry 2 -->
               <div class="card-blogEntry panel">
                  <div id="secondChart" class="chart center">
                     <script>
                        var myChart2 = "html/json/1_Embedding/chart2_ukProductivity.json";
                        vegaEmbed('#secondChart', myChart2);
                     </script>
                  </div>
                  <div class="blog-details">
                     <h3><b>Example Graph 2</b></h3>
                  </div>
                  <div class="blog-description">
                     <h5>Data was sourced from ONS as csv file</h5>
                     <h6>This second graph, also given before hand, is pulling data from a github repository as a csv
                        file.
                        The html embed script looks like this:
                     </h6>
                     <!-- HTML generated using hilite.me -->
                     <div
                        style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;">
                        <table>
                           <tr>
                              <td>
                                 <pre style="margin: 0; line-height: 125%">1
2
3
4
5
6</pre>
                              </td>
                              <td>
                                 <pre style="margin: 0; line-height: 125%"><span style="color: #333333">&lt;</span>div <span style="color: #007020">id</span><span style="color: #333333">=</span><span style="background-color: #fff0f0">&quot;firstChart&quot;</span> class<span style="color: #333333">=</span><span style="background-color: #fff0f0">&quot;chart center&quot;</span><span style="color: #333333">&gt;</span>
    <span style="color: #333333">&lt;</span>script<span style="color: #333333">&gt;</span>
        var myChart1 <span style="color: #333333">=</span> <span style="background-color: #fff0f0">&quot;html/json/1_Embedding/chart1_covidUKRegions.json&quot;</span>;
        vegaEmbed(<span style="background-color: #fff0f0">&#39;#firstChart&#39;</span>, myChart1);
    <span style="color: #333333">&lt;/</span>script<span style="color: #333333">&gt;</span>
<span style="color: #333333">&lt;/</span>div<span style="color: #333333">&gt;</span>
</pre>
                              </td>
                           </tr>
                        </table>
                     </div>
                  </div>
               </div>
               <hr>
               <!-- Blog entry 3 -->
               <div class="card-blogEntry panel">
                  <div class="chart center" id="thirdChart">
                     <script>
                        var myChart3 = "html/json/1_Embedding/chart3_givenBitcoin.json";
                        vegaEmbed('#thirdChart', myChart3);
                     </script>
                  </div>
                  <div class="blog-details">
                     <h3><b>Bitcoin chart taken from rapidcharts.io</b></h3>
                  </div>
                  <div class="blog-0description">
                     <h5>Data was sourced from Coinbase via FRED</h5>
                     <h6>The third graph was fetched from rapidcharts.io. By using the inspect tool I was able to pull
                        the json spec and embed that here.</h6>
                  </div>
               </div>
               <hr>
            </div>
         </div>
      </div>
   </div>
   <!-- 2. Hosting Panel -->
   <div class="cd-panel cd-panel--from-right js-cd-panel-2-Hosting">
      <header class="cd-panel__header">
         <h1>2. Hosting Data</h1>
         <a href="#0" class="cd-panel__close js-cd-close">Close</a>
      </header>
      <div class="cd-panel__container">
         <div class="cd-panel__content">
            <div class="col-blogEntry panel">
               <!-- Blog entry 1 -->
               <div class="card-blogEntry panel">
                  <div id="fourthChart" class="chart center">
                     <script>
                        var myChart4 = "html/json/2_Hosting/chart1_givenCovidCases.json";
                        vegaEmbed('#fourthChart', myChart4);
                     </script>
                  </div>
                  <div class="blog-details">
                     <h3><b>ONS API Data</b></h3>
                  </div>
                  <div class="blog-description">
                     <h5>Data was sourced from an ONS API and filtered to only include Birmingham, Croydon, Manchester,
                        Sheffield and Brighton. <br>
                        <span class="date">11th October, 2021</span>
                     </h5>
                     <h6>
                        Progressing from the specs we saw in the examples, I was tasked to design two charts that source
                        their data differently. This first chart simply source a direct URL of an API and the necessary
                        parameters - API key, data points etc - in the json file.
                     </h6>
                     <h6>
                        The code in json to implement the API source and filter the data looks like this:
                     </h6>
                     <!-- HTML generated using hilite.me -->
                     <div
                        style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;">
                        <table>
                           <tr>
                              <td>
                                 <pre style="margin: 0; line-height: 125%"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre>
                              </td>
                              <td>
                                 <pre style="margin: 0; line-height: 125%"><span style="background-color: #fff0f0">&quot;data&quot;</span><span style="color: #FF0000; background-color: #FFAAAA">:</span> {
    <span style="color: #007700">&quot;url&quot;</span>: <span style="background-color: #fff0f0">&quot;https://api.coronavirus.data.gov.uk/v2/data?areaType=ltla&amp;metric=newCasesBySpecimenDate&amp;format=csv&quot;</span>,
    <span style="color: #007700">&quot;format&quot;</span>: {<span style="color: #007700">&quot;type&quot;</span>: <span style="background-color: #fff0f0">&quot;csv&quot;</span>}
  }<span style="color: #FF0000; background-color: #FFAAAA">,</span>

   <span style="background-color: #fff0f0">&quot;transform&quot;</span><span style="color: #FF0000; background-color: #FFAAAA">:</span>[

      {<span style="color: #007700">&quot;filter&quot;</span>: {
        <span style="color: #007700">&quot;field&quot;</span>: <span style="background-color: #fff0f0">&quot;areaName&quot;</span>, 
        <span style="color: #007700">&quot;oneOf&quot;</span>: [<span style="background-color: #fff0f0">&quot;Croydon&quot;</span>, <span style="background-color: #fff0f0">&quot;Sheffield&quot;</span>, <span style="background-color: #fff0f0">&quot;Manchester&quot;</span>, <span style="background-color: #fff0f0">&quot;Birmingham&quot;</span>]}
        }

    ]<span style="color: #FF0000; background-color: #FFAAAA">,</span>
</pre>
                              </td>
                           </tr>
                        </table>
                     </div>
                  </div>
               </div>
               <hr>
               <!-- Blog entry 2 -->
               <div class="card-blogEntry panel">
                  <div id="fifthChart" class="chart center">
                     <script>
                        var myChart5 = "html/json/2_Hosting/chart2_givenCovidDeaths.json";
                        vegaEmbed('#fifthChart', myChart5);
                     </script>
                  </div>
                  <div class="blog-details">
                     <h3><b>LocalHost Data</b></h3>
                  </div>
                  <div class="blog-description">
                     <h5>Data was sourced from ONS as csv file and hosted on GitHub</h5>
                     <h6>
                        The second chart sources data from a csv file that holds data previously downloaded then hosted
                        locally with this page on my GitHub repository.
                     </h6>
                     <h6>
                        The code to implement a csv file as data for a chart looks like this:
                     </h6>
                     <!-- HTML generated using hilite.me -->
                     <div
                        style="background: #f0f0f0; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;">
                        <table>
                           <tr>
                              <td>
                                 <pre style="margin: 0; line-height: 125%">1
2
3
4</pre>
                              </td>
                              <td>
                                 <pre style="margin: 0; line-height: 125%"><span style="color: #4070a0">&quot;data&quot;</span><span style="border: 1px solid #FF0000">:</span> {
    <span style="color: #062873; font-weight: bold">&quot;url&quot;</span>: <span style="color: #4070a0">&quot;https://lhkkennedy.github.io/html/json/2_Hosting/data2_givenCovidDeaths.csv&quot;</span>,
    <span style="color: #062873; font-weight: bold">&quot;format&quot;</span>: {<span style="color: #062873; font-weight: bold">&quot;type&quot;</span>: <span style="color: #4070a0">&quot;csv&quot;</span>}
  }<span style="border: 1px solid #FF0000">,</span>
</pre>
                              </td>
                           </tr>
                        </table>
                     </div>
                  </div>
               </div>
               <hr>
            </div>
         </div>
      </div>
   </div>
   <!-- 3. Editing Data-->
   <div class="cd-panel cd-panel--from-right js-cd-panel-3-Editing">
      <header class="cd-panel__header">
         <h1>3. Editing</h1>
         <a href="#0" class="cd-panel__close js-cd-close">Close</a>
      </header>
      <div class="cd-panel__container">
         <div class="cd-panel__content">
            <div class="col-blogEntry panel">
               <!-- Blog entry 1 -->
               <div class="card-blogEntry panel">
                  <div id="sixthChart" class="chart center">
                     <script>
                        var myChart6 = "html/json/3_Editing/chart1_STA.json";
                        vegaEmbed('#sixthChart', myChart6);
                     </script>
                  </div>
                  <div class="blog-details">
                     <h3><b>Python scripts</b></h3>
                  </div>
                  <div class="blog-description">
                     <h5>Manipulating data with scripts makes your life much easier.<br>
                        <span class="date">18th October, 2021</span>
                     </h5>
                     <h6>
                        This week we were tasked to begin manipulating data to suite our needs. This chart plots two
                        time series from two seperate API URLs. Pulling data from two seperate API URLs may take longer
                        than if the data was together in one file hosted on GitHub. As I discover the json data files
                        were deeply nested and would require some cleaning before a clean merge using python would be
                        possible. After normalising the data and exporting the data frame to a csv file, the data set
                        was merged into one file and hosted on GitHub.
                     </h6>
                     <br>
                     <h6>
                        The code fo normalising nested json data and exporting it to a csv file looks like this:
                     </h6>
                     <!-- HTML generated using hilite.me -->
                     <div
                        style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;">
                        <pre style="margin: 0; line-height: 125%"><span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">json</span>
   <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">pandas</span> <span style="color: #008800; font-weight: bold">as</span> <span style="color: #0e84b5; font-weight: bold">pd</span>

   file_base <span style="color: #333333">=</span> <span style="background-color: #fff0f0">&quot;FREDdata_WFRB{}.json&quot;</span>
   fredSeries <span style="color: #333333">=</span> [<span style="background-color: #fff0f0">&quot;LB50107&quot;</span>, <span style="background-color: #fff0f0">&quot;LT01026&quot;</span>, <span style="background-color: #fff0f0">&quot;SB50189&quot;</span>, <span style="background-color: #fff0f0">&quot;ST01108&quot;</span>]
   
   <span style="color: #888888"># for loops to iterate through multiple json files</span>
   <span style="color: #008800; font-weight: bold">for</span> i <span style="color: #000000; font-weight: bold">in</span> fredSeries:
       filename <span style="color: #333333">=</span> file_base<span style="color: #333333">.</span>format(i)
       <span style="color: #008800; font-weight: bold">with</span> <span style="color: #007020">open</span>(filename, <span style="background-color: #fff0f0">&quot;rb&quot;</span>) <span style="color: #008800; font-weight: bold">as</span> infile:
           
           <span style="color: #888888">#load the json file infile</span>
           data <span style="color: #333333">=</span> json<span style="color: #333333">.</span>load(infile)
   
           <span style="color: #888888"># normalise nested data - we only care about the data in &#39;observations&#39;</span>
           data <span style="color: #333333">=</span> pd<span style="color: #333333">.</span>json_normalize(data, <span style="background-color: #fff0f0">&quot;observations&quot;</span>)
           df <span style="color: #333333">=</span> pd<span style="color: #333333">.</span>DataFrame(data)
           <span style="color: #008800; font-weight: bold">print</span>(df)
           
           <span style="color: #888888">#export to csv file.</span>
           df<span style="color: #333333">.</span>to_csv (i<span style="color: #333333">+</span><span style="background-color: #fff0f0">&#39;.csv&#39;</span>)
   </pre>
                     </div>
                  </div>
               </div>
               <hr>
               <!-- Blog entry 2 -->
               <div class="card-blogEntry panel">
                  <div id="seventhChart" class="chart center">
                     <script>
                        var myChart7 = "html/json/3_Editing/chart2_inline.json";
                        vegaEmbed('#seventhChart', myChart7);
                     </script>
                  </div>
                  <div class="blog-details">
                     <h3><b>Understanding the JSON matrix</b></h3>
                  </div>
                  <div class="blog-description">
                     <h5>This chart demonstrates the use of data from a json matrix nested in the spec for the chart.
                        The spec looks like this:</h5>
                     <!-- HTML generated using hilite.me -->
                     <div
                        style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;">
                        <pre style="margin: 0; line-height: 125%">  <span style="background-color: #fff0f0">&quot;data&quot;</span><span style="color: #FF0000; background-color: #FFAAAA">:</span> {
   <span style="color: #007700">&quot;values&quot;</span>: [
   {<span style="color: #007700">&quot;a&quot;</span>: <span style="background-color: #fff0f0">&quot;1&quot;</span>, <span style="color: #007700">&quot;b&quot;</span>: <span style="color: #0000DD; font-weight: bold">28</span>},
   {<span style="color: #007700">&quot;a&quot;</span>: <span style="background-color: #fff0f0">&quot;2&quot;</span>, <span style="color: #007700">&quot;b&quot;</span>: <span style="color: #0000DD; font-weight: bold">55</span>},
   {<span style="color: #007700">&quot;a&quot;</span>: <span style="background-color: #fff0f0">&quot;3&quot;</span>, <span style="color: #007700">&quot;b&quot;</span>: <span style="color: #0000DD; font-weight: bold">43</span>},
   {<span style="color: #007700">&quot;a&quot;</span>: <span style="background-color: #fff0f0">&quot;4&quot;</span>, <span style="color: #007700">&quot;b&quot;</span>: <span style="color: #0000DD; font-weight: bold">91</span>},
   {<span style="color: #007700">&quot;a&quot;</span>: <span style="background-color: #fff0f0">&quot;5&quot;</span>, <span style="color: #007700">&quot;b&quot;</span>: <span style="color: #0000DD; font-weight: bold">81</span>},
   {<span style="color: #007700">&quot;a&quot;</span>: <span style="background-color: #fff0f0">&quot;6&quot;</span>, <span style="color: #007700">&quot;b&quot;</span>: <span style="color: #0000DD; font-weight: bold">53</span>},
   {<span style="color: #007700">&quot;a&quot;</span>: <span style="background-color: #fff0f0">&quot;7&quot;</span>, <span style="color: #007700">&quot;b&quot;</span>: <span style="color: #0000DD; font-weight: bold">19</span>},
   {<span style="color: #007700">&quot;a&quot;</span>: <span style="background-color: #fff0f0">&quot;8&quot;</span>, <span style="color: #007700">&quot;b&quot;</span>: <span style="color: #0000DD; font-weight: bold">87</span>},
   {<span style="color: #007700">&quot;a&quot;</span>: <span style="background-color: #fff0f0">&quot;9&quot;</span>, <span style="color: #007700">&quot;b&quot;</span>: <span style="color: #0000DD; font-weight: bold">52</span>}
 ]
}<span style="color: #FF0000; background-color: #FFAAAA">,</span>
<span style="background-color: #fff0f0">&quot;mark&quot;</span><span style="color: #FF0000; background-color: #FFAAAA">:</span> <span style="background-color: #fff0f0">&quot;bar&quot;</span><span style="color: #FF0000; background-color: #FFAAAA">,</span>
<span style="background-color: #fff0f0">&quot;encoding&quot;</span><span style="color: #FF0000; background-color: #FFAAAA">:</span> {
 <span style="color: #007700">&quot;x&quot;</span>: {<span style="color: #007700">&quot;field&quot;</span>: <span style="background-color: #fff0f0">&quot;a&quot;</span>, <span style="color: #007700">&quot;type&quot;</span>: <span style="background-color: #fff0f0">&quot;nominal&quot;</span>, <span style="color: #007700">&quot;axis&quot;</span>: {<span style="color: #007700">&quot;labelAngle&quot;</span>: <span style="color: #0000DD; font-weight: bold">0</span>}},
 <span style="color: #007700">&quot;y&quot;</span>: {<span style="color: #007700">&quot;field&quot;</span>: <span style="background-color: #fff0f0">&quot;b&quot;</span>, <span style="color: #007700">&quot;type&quot;</span>: <span style="background-color: #fff0f0">&quot;quantitative&quot;</span>}
}
</pre>
                     </div>
                  </div>
               </div>
               <hr>
            </div>
         </div>
      </div>
   </div>
   <!-- 4. API-->
   <div class="cd-panel cd-panel--from-right js-cd-panel-4-API">
      <header class="cd-panel__header">
         <h1>4. API </h1>
         <a href="#0" class="cd-panel__close js-cd-close">Close</a>
      </header>
      <div class="cd-panel__container">
         <div class="cd-panel__content">
            <div class="col-blogEntry panel">
               <!-- Blog entry 1 -->
               <div class="card-blogEntry panel">
                  <div id="eigthChart" class="chart center">
                     <script>
                        var myChart8 = "html/json/4_API/chart1_EIAemissionAPI.json";
                        vegaEmbed('#eigthChart', myChart8);
                     </script>
                  </div>
                  <div class="blog-details">
                     <h3><b>Application Programming Interface</b></h3>
                  </div>
                  <div class="blog-description">
                     <h5>
                        <span class="date">4th October, 2021</span>
                     </h5>
                     <h6>
                        The focus for this session was navigating APIs to to obtain the right data. Many APIs will
                        provide a free key within seconds of signing up. The two charts embedded here are linked to the
                        EIA emissions API and the FRED API.
                        By reading the documentation of each API you can learn how to manipulate the request URL to
                        change the data pulled.
                     </h6>
                     <h6>
                        The eia for example provides the sample URL and by inserting your own parameters you receive the
                        desired response:
                     </h6>
                     <!-- HTML generated using hilite.me -->
                     <div
                        style="background: #f0f0f0; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;">
                        <pre style="margin: 0; line-height: 125%"><span style="border: 1px solid #FF0000">http://api.eia.gov/series/?series_id=sssssss&amp;api_key=YOUR_API_KEY_HERE</span>[<span style="border: 1px solid #FF0000">&amp;num=</span>][<span style="border: 1px solid #FF0000">&amp;out=xml|json</span>]

   <span style="border: 1px solid #FF0000">https://api.eia.gov/series/?series_id=EMISS.CO</span><span style="color: #40a070">2</span><span style="border: 1px solid #FF0000">-TOTV-TT-TO-US.A&amp;api_key=bZ</span><span style="color: #40a070">7</span><span style="border: 1px solid #FF0000">fbef</span><span style="color: #40a070">9</span><span style="border: 1px solid #FF0000">jvSqEelw</span><span style="color: #40a070">3</span><span style="border: 1px solid #FF0000">XbaF</span><span style="color: #40a070">6</span><span style="border: 1px solid #FF0000">ise</span><span style="color: #40a070">1</span><span style="border: 1px solid #FF0000">CnHdeq</span><span style="color: #40a070">2</span><span style="border: 1px solid #FF0000">SX</span><span style="color: #40a070">5</span><span style="border: 1px solid #FF0000">Jbbp&amp;out=json</span>

   {
     <span style="color: #062873; font-weight: bold">&quot;request&quot;</span>: {
         <span style="color: #062873; font-weight: bold">&quot;command&quot;</span>: <span style="color: #4070a0">&quot;series&quot;</span>,
         <span style="color: #062873; font-weight: bold">&quot;series_id&quot;</span>: <span style="color: #4070a0">&quot;EMISS.CO2-TOTV-TT-TO-US.A&quot;</span>
     },
     <span style="color: #062873; font-weight: bold">&quot;series&quot;</span>: [
         {
             <span style="color: #062873; font-weight: bold">&quot;series_id&quot;</span>: <span style="color: #4070a0">&quot;EMISS.CO2-TOTV-TT-TO-US.A&quot;</span>,
             <span style="color: #062873; font-weight: bold">&quot;name&quot;</span>: <span style="color: #4070a0">&quot;Total carbon dioxide emissions from all sectors, all fuels, United States&quot;</span>,
             <span style="color: #062873; font-weight: bold">&quot;units&quot;</span>: <span style="color: #4070a0">&quot;million metric tons CO2&quot;</span>,
             <span style="color: #062873; font-weight: bold">&quot;f&quot;</span>: <span style="color: #4070a0">&quot;A&quot;</span>,
             <span style="color: #062873; font-weight: bold">&quot;unitsshort&quot;</span>: <span style="color: #4070a0">&quot;mmt CO2&quot;</span>,
             <span style="color: #062873; font-weight: bold">&quot;description&quot;</span>: <span style="color: #4070a0">&quot;See http:\/\/www.eia.gov\/environment\/emissions\/state\/analysis\/ for technical notes and documentation.&quot;</span>,
             <span style="color: #062873; font-weight: bold">&quot;copyright&quot;</span>: <span style="color: #4070a0">&quot;None&quot;</span>,
             <span style="color: #062873; font-weight: bold">&quot;source&quot;</span>: <span style="color: #4070a0">&quot;EIA, U.S. Energy Information Administration&quot;</span>,
             <span style="color: #062873; font-weight: bold">&quot;iso3166&quot;</span>: <span style="color: #4070a0">&quot;USA-US&quot;</span>,
             <span style="color: #062873; font-weight: bold">&quot;geography&quot;</span>: <span style="color: #4070a0">&quot;USA-US&quot;</span>,
             <span style="color: #062873; font-weight: bold">&quot;start&quot;</span>: <span style="color: #4070a0">&quot;1980&quot;</span>,
             <span style="color: #062873; font-weight: bold">&quot;end&quot;</span>: <span style="color: #4070a0">&quot;2018&quot;</span>,
             <span style="color: #062873; font-weight: bold">&quot;updated&quot;</span>: <span style="color: #4070a0">&quot;2021-10-14T16:18:55-0400&quot;</span>,
             <span style="color: #062873; font-weight: bold">&quot;data&quot;</span>: [
                 [
                     <span style="color: #4070a0">&quot;2018&quot;</span>,
                     <span style="color: #40a070">5297.409232</span>
                 ],
                 [
                     <span style="color: #4070a0">&quot;2017&quot;</span>,
                     <span style="color: #40a070">5146.352484</span>
                 ],
                 [
                     <span style="color: #4070a0">&quot;2016&quot;</span>,
                     <span style="color: #40a070">5178.787104</span>
                 ],
                 [
                     <span style="color: #4070a0">&quot;2015&quot;</span>,
                     <span style="color: #40a070">5262.977138</span>
                 ],
                 [
                     <span style="color: #4070a0">&quot;2014&quot;</span>,
                     <span style="color: #40a070">5413.676531</span>
                 ],
                 [
                     <span style="color: #4070a0">&quot;2013&quot;</span>,
                     <span style="color: #40a070">5353.413972</span>
                 ],
                 [
                     <span style="color: #4070a0">&quot;2012&quot;</span>,
                     <span style="color: #40a070">5210.996162</span>
                 ],
                 [
                     <span style="color: #4070a0">&quot;2011&quot;</span>,
                     <span style="color: #40a070">5439.366158</span>
                 ],
                 [
                     <span style="color: #4070a0">&quot;2010&quot;</span>,
                     <span style="color: #40a070">5571.811048</span>
                 ],
                 [
                     <span style="color: #4070a0">&quot;2009&quot;</span>,
                     <span style="color: #40a070">5368.120164</span>
                 ],
                 [
                     <span style="color: #4070a0">&quot;2008&quot;</span>,
                     <span style="color: #40a070">5781.278091</span>
                 ],
                 [
                     <span style="color: #4070a0">&quot;2007&quot;</span>,
   
       <span style="border: 1px solid #FF0000">....</span>
   </pre>
                     </div>

                  </div>
               </div>
               <hr>
               <!-- Blog entry 2 -->
               <div class="card-blogEntry panel">
                  <div id="ninethChart" class="chart center">
                     <script>
                        var myChart9 = "html/json/4_API/chart2_unrate.json";
                        vegaEmbed('#ninethChart', myChart9);
                     </script>
                  </div>
                  <div class="blog-details">
                     <h3><b>FRED API: Unemployment Rate</b></h3>
                  </div>
                  <div class="blog-description">
                     <h6>
                        The API URL for the data used in this chart was included in a python program that downloaded the
                        data as a local file which was then hosted on GitHub. By understanding the structure of the API
                        URL pulling vast amounts of data becomes much easier.
                     </h6>
                  </div>
               </div>
               <hr>
            </div>
         </div>
      </div>
   </div>
   <!-- 5. Loops -->
   <div class="cd-panel cd-panel--from-right js-cd-panel-5-Loops">
      <header class="cd-panel__header">
         <h1>5. Loops </h1>
         <a href="#0" class="cd-panel__close js-cd-close">Close</a>
      </header>
      <div class="cd-panel__container">
         <div class="cd-panel__content">
            <div class="col-blogEntry panel">
               <!-- Blog entry 1 -->
               <div class="card-blogEntry panel">
                  <div id="tenthChart" class="chart center">
                     <script>
                        var myChart10 = "html/json/5_Loops/chart1_TNW.json";
                        vegaEmbed('#tenthChart', myChart10);
                     </script>
                  </div>
                  <div class="blog-details">
                     <h3><b>Python Scripts & APIs</b></h3>
                  </div>
                  <div class="blog-description">
                     <h5>FRED API: Total Net Worth by wealth percentile<br>
                        <span class="date">4th October, 2021</span>
                     </h5>
                     <h6>
                        The focus for this session was navigating APIs to to obtain the right data. Many APIs will
                        provide a free key within seconds of signing up. The two charts embedded here are linked to the
                        EIA emissions API and the FRED API.
                        By reading the documentation of each API you can learn how to manipulate the request URL to
                        change the data pulled. The eia for example provides the sample URL and by inserting your own
                        parameters you receive the desired response:
                     </h6>
                     <!-- HTML generated using hilite.me -->
                     <div
                        style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;">
                        <pre style="margin: 0; line-height: 125%"><span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">requests</span>
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">json</span>
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">os</span>
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">csv</span>

<span style="color: #888888"># insert URL with api Key </span>
url_base <span style="color: #333333">=</span> <span style="background-color: #fff0f0">&quot;https://api.stlouisfed.org/fred/series/observations?series_id={}&amp;api_key=22ee7a76e736e32f54f5df0a7171538d&amp;file_type=json&quot;</span>
file_base <span style="color: #333333">=</span> <span style="background-color: #fff0f0">&quot;FREDdata_{}.json&quot;</span>
fredSeries <span style="color: #333333">=</span> [<span style="background-color: #fff0f0">&#39;WFRBLB50107&#39;</span>,<span style="background-color: #fff0f0">&#39;WFRBLT01026&#39;</span>,<span style="background-color: #fff0f0">&#39;WFRBSB50189&#39;</span>,<span style="background-color: #fff0f0">&#39;WFRBST01108&#39;</span>]
<span style="color: #008800; font-weight: bold">for</span> i <span style="color: #000000; font-weight: bold">in</span> fredSeries:
    URL <span style="color: #333333">=</span> url_base<span style="color: #333333">.</span>format(i)
    data <span style="color: #333333">=</span> requests<span style="color: #333333">.</span>get(URL)<span style="color: #333333">.</span>json()
    <span style="color: #888888">#print(data)</span>
    fileName <span style="color: #333333">=</span> file_base<span style="color: #333333">.</span>format(i)
    <span style="color: #008800; font-weight: bold">print</span>(fileName)
    <span style="color: #007020">open</span>(fileName, <span style="background-color: #fff0f0">&#39;w&#39;</span>)
    <span style="color: #008800; font-weight: bold">with</span> <span style="color: #007020">open</span>(fileName, <span style="background-color: #fff0f0">&#39;w&#39;</span>, encoding<span style="color: #333333">=</span><span style="background-color: #fff0f0">&#39;utf-8&#39;</span>) <span style="color: #008800; font-weight: bold">as</span> f:
        json<span style="color: #333333">.</span>dump(data, f, ensure_ascii<span style="color: #333333">=</span><span style="color: #007020">False</span>, indent<span style="color: #333333">=</span><span style="color: #0000DD; font-weight: bold">4</span>)
        <span style="color: #008800; font-weight: bold">print</span>(i, <span style="background-color: #fff0f0">&quot; Data from &quot;</span>, URL, <span style="background-color: #fff0f0">&#39; dumped.&#39;</span>)
</pre>
                     </div>
                  </div>
               </div>
               <hr>
               <!-- Blog entry 2 -->
               <div class="card-blogEntry panel">
                  <div id="eleventhChart" class="chart center">
                     <script>
                        var myChart11 = "html/json/5_Loops/chart2_flightTimes.json";
                        vegaEmbed('#eleventhChart', myChart11);
                     </script>
                  </div>
                  <div class="blog-details">
                     <h3><b>AeroDataBox</b></h3>
                  </div>
                  <div class="blog-description">
                     <h5>Flight duration from London Heathrow Airport (Top 5 Busiest Airports)</h5>
                     <h6>
                        This next chart presents data extracted from AeroDataBox API run on RapidAPI. It provides data
                        points on the approximate distance and flight duration between airports. Each URL only produces
                        data for one pair of airports so we require a for loop to run through the different series Ids.
                        By loading the json file then inputting the data into a DataFrame to export as a csv we are able
                        to host this data in a more accessible manner. The json spec points to one file for data.
                     </h6>
                     <!-- HTML generated using hilite.me -->
                     <div
                        style="background: #f0f0f0; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;">
                        <pre style="margin: 0; line-height: 125%"><span style="color: #4070a0">&quot;data&quot;</span><span style="border: 1px solid #FF0000">:</span> {
   <span style="color: #062873; font-weight: bold">&quot;url&quot;</span>: <span style="color: #4070a0">&quot;html/json/5_Loops/data2_flightTimes.csv&quot;</span>,
   <span style="color: #062873; font-weight: bold">&quot;format&quot;</span>: {<span style="color: #062873; font-weight: bold">&quot;type&quot;</span>: <span style="color: #4070a0">&quot;csv&quot;</span>}
 }<span style="border: 1px solid #FF0000">,</span>
 </pre>
                     </div>

                  </div>
               </div>
               <!-- Blog entry 2 -->
               <div class="card-blogEntry panel">
                  <div class="blog-details">
                     <h3><b>Python Script</b></h3>
                  </div>
                  <div class="blog-description">
                     <h6>
                        The code I used to extract and compile a data set from AeroDataBox API for durations of flights
                        from London Heathrow.
                     </h6>
                     <!-- HTML generated using hilite.me -->
                     <div
                        style="background: #f0f0f0; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;">
                        <pre style="margin: 0; line-height: 125%"><span style="color: #007020; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">requests</span>
   <span style="color: #007020; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">pandas</span> <span style="color: #007020; font-weight: bold">as</span> <span style="color: #0e84b5; font-weight: bold">pd</span>
   <span style="color: #007020; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">json</span>
   <span style="color: #007020; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">os</span>
   
   url_base <span style="color: #666666">=</span> <span style="color: #4070a0">&quot;https://aerodatabox.p.rapidapi.com/airports/iata/LHR/distance-time/{}&quot;</span>
   IATAcodes <span style="color: #666666">=</span> [<span style="color: #4070a0">&quot;PEK&quot;</span>, <span style="color: #4070a0">&quot;DXB&quot;</span>, <span style="color: #4070a0">&quot;ORD&quot;</span>, <span style="color: #4070a0">&quot;HND&quot;</span>, <span style="color: #4070a0">&quot;LAX&quot;</span>]
   
   df <span style="color: #666666">=</span> pd<span style="color: #666666">.</span>DataFrame()
   
   headers <span style="color: #666666">=</span> {
       <span style="color: #4070a0">&#39;x-rapidapi-host&#39;</span>: <span style="color: #4070a0">&quot;aerodatabox.p.rapidapi.com&quot;</span>,
       <span style="color: #4070a0">&#39;x-rapidapi-key&#39;</span>: <span style="color: #4070a0">&quot;7fd71fcbbemsh8c86cdcbb832719p18d2ffjsn738011331d29&quot;</span>
       }
   
   <span style="color: #007020; font-weight: bold">for</span> i <span style="color: #007020; font-weight: bold">in</span> IATAcodes:
       t <span style="color: #666666">=</span> IATAcodes<span style="color: #666666">.</span>index(i)
       <span style="color: #007020; font-weight: bold">print</span>(<span style="color: #4070a0">&quot;--------------------------------------------&quot;</span>)
       response <span style="color: #666666">=</span> requests<span style="color: #666666">.</span>request(<span style="color: #4070a0">&quot;GET&quot;</span>, url_base<span style="color: #666666">.</span>format(i), headers<span style="color: #666666">=</span>headers)
       json_data <span style="color: #666666">=</span> json<span style="color: #666666">.</span>loads(response<span style="color: #666666">.</span>text)
       name <span style="color: #666666">=</span> json_data[<span style="color: #4070a0">&quot;to&quot;</span>][<span style="color: #4070a0">&quot;name&quot;</span>]
       flightTime <span style="color: #666666">=</span> json_data[<span style="color: #4070a0">&quot;approxFlightTime&quot;</span>]
       distancekm <span style="color: #666666">=</span> json_data[<span style="color: #4070a0">&quot;greatCircleDistance&quot;</span>][<span style="color: #4070a0">&quot;km&quot;</span>]
       distancemi <span style="color: #666666">=</span> json_data[<span style="color: #4070a0">&quot;greatCircleDistance&quot;</span>][<span style="color: #4070a0">&quot;mile&quot;</span>]
       <span style="color: #007020; font-weight: bold">print</span>(<span style="color: #4070a0">&quot;Name: &quot;</span>, name)
       <span style="color: #007020; font-weight: bold">print</span>(<span style="color: #4070a0">&quot;IATA code: &quot;</span>, i)
       <span style="color: #007020; font-weight: bold">print</span>(<span style="color: #4070a0">&quot;Approx flightime from London Heathrow: &quot;</span>, flightTime)
       <span style="color: #007020; font-weight: bold">print</span>(<span style="color: #4070a0">&quot;Distance (km): &quot;</span>, distancekm)
       <span style="color: #007020; font-weight: bold">print</span>(<span style="color: #4070a0">&quot;Distance (mi): &quot;</span>, distancemi)
       <span style="color: #007020; font-weight: bold">print</span>(<span style="color: #4070a0">&quot;Adding to dataframe....&quot;</span>)
       <span style="color: #60a0b0; font-style: italic">## convert time to decimal time</span>
       (h, m, s) <span style="color: #666666">=</span> flightTime<span style="color: #666666">.</span>split(<span style="color: #4070a0">&quot;:&quot;</span>)
       decFlightTime <span style="color: #666666">=</span> <span style="color: #007020">int</span>(h) <span style="color: #666666">+</span> <span style="color: #007020">int</span>(m) <span style="color: #666666">/</span> <span style="color: #40a070">60</span> <span style="color: #666666">+</span> <span style="color: #007020">int</span>(s) <span style="color: #666666">/</span> <span style="color: #40a070">3600</span>
       <span style="color: #60a0b0; font-style: italic">#results for this airport</span>
       results <span style="color: #666666">=</span> [i, name, decFlightTime, distancekm, distancemi]
       <span style="color: #60a0b0; font-style: italic">#store in a dataframe</span>
       df_t <span style="color: #666666">=</span> pd<span style="color: #666666">.</span>DataFrame(results)
       df_t<span style="color: #666666">.</span>columns <span style="color: #666666">=</span> [<span style="color: #4070a0">&#39;Data&#39;</span>]
       df[t] <span style="color: #666666">=</span> df_t[<span style="color: #4070a0">&#39;Data&#39;</span>]
   
   df <span style="color: #666666">=</span> df<span style="color: #666666">.</span>T
   df<span style="color: #666666">.</span>columns <span style="color: #666666">=</span> [<span style="color: #4070a0">&quot;IATA_Code&quot;</span>, <span style="color: #4070a0">&quot;Name&quot;</span>, <span style="color: #4070a0">&quot;Approximate Flight Time&quot;</span>, <span style="color: #4070a0">&quot;Distance (km)&quot;</span>, <span style="color: #4070a0">&quot;Distance (mi)&quot;</span>]
   
   <span style="color: #007020; font-weight: bold">print</span>(<span style="color: #4070a0">&quot;--------------------------------------------&quot;</span>)
   <span style="color: #007020; font-weight: bold">print</span>(<span style="color: #4070a0">&quot;Data Frame: &quot;</span>, df)
   
   <span style="color: #60a0b0; font-style: italic">## saving as csv file</span>
   filename <span style="color: #666666">=</span> <span style="color: #4070a0">&#39;ApproxFlightTimesFromLHR.csv&#39;</span>
   filelocation <span style="color: #666666">=</span> os<span style="color: #666666">.</span>getcwd()
   <span style="color: #007020; font-weight: bold">print</span>(<span style="color: #4070a0">&quot;Saving as: &quot;</span> <span style="color: #666666">+</span> filename <span style="color: #666666">+</span> <span style="color: #4070a0">&quot;in: &quot;</span> <span style="color: #666666">+</span> filelocation)
   df<span style="color: #666666">.</span>to_csv(filename)
   </pre>
                     </div>

                  </div>
               </div>
               <hr>
            </div>
         </div>
      </div>
   </div>
   <!-- 6. Scraper  -->
   <div class="cd-panel cd-panel--from-right js-cd-panel-6-Scraper">
      <header class="cd-panel__header">
         <h1>6. Scraper </h1>
         <a href="#0" class="cd-panel__close js-cd-close">Close</a>
      </header>
      <div class="cd-panel__container">
         <div class="cd-panel__content">
            <div class="col-blogEntry panel">
               <!-- Blog entry 1 -->
               <div class="card-blogEntry panel">
                  <div id="twelfthChart" class="chart center">
                     <script>
                        var myChart12 = "html/json/6_Scraper/chart_scraper.json";
                        vegaEmbed('#twelfthChart', myChart12);
                     </script>
                  </div>
                  <div class="blog-details">
                     <h3><b>Parsing the Internet</b></h3>
                  </div>
                  <div class="blog-description">
                     <h5>Ticker scraped from YahooFinance<br>
                        <span class="date">4th October, 2021</span>
                     </h5>
                     <h6>
                        Building on the skills obtained by creating our own python scripts to automate some actions, we build an even more powerful tool to collect data from the internet. Scraping the contents of websites. By inspecting the source code and parsing the tags' identifiers, we can target the piece of text that you find useful in the website. We can then use this to begin building a database.
                     </h6>
                  </div>
               </div>
               <hr>
               <!-- Blog entry 1 -->
               <div class="card-blogEntry panel">
                  <div class="blog-details">
                     <h3><b>yahooScraper.py</b></h3>
                  </div>
                  <div class="blog-description">
                     <h6>
                        This example scrapes the information of select stocks and indicators on yahoofinance. The file yahooScraper.py is hosted on the GitHub and when ever it is run the data file for the chart is updated to the latest data. This still needs to then be committed and pushed through git and requires the manual running of the script, but this automates a lot of actions and saves time. The structure for this scraper can be applied to most other websites.
                     </h6>
<!-- HTML generated using hilite.me --><div style="background: #f0f0f0; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #007020; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">numpy</span> <span style="color: #007020; font-weight: bold">as</span> <span style="color: #0e84b5; font-weight: bold">np</span>
<span style="color: #007020; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">pandas</span> <span style="color: #007020; font-weight: bold">as</span> <span style="color: #0e84b5; font-weight: bold">pd</span>
<span style="color: #007020; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">requests</span>
<span style="color: #007020; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">string</span>
<span style="color: #007020; font-weight: bold">from</span> <span style="color: #0e84b5; font-weight: bold">bs4</span> <span style="color: #007020; font-weight: bold">import</span> BeautifulSoup
<span style="color: #007020; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">os</span>
<span style="color: #007020; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">time</span>

<span style="color: #60a0b0; font-style: italic">## Using Multiple URLs ##</span>
URL_base <span style="color: #666666">=</span> <span style="color: #4070a0">&quot;https://ukfinance.yahoo.com/quote/{}&quot;</span>
tickers <span style="color: #666666">=</span> [<span style="color: #4070a0">&quot;AMZN&quot;</span>, <span style="color: #4070a0">&quot;TSLA&quot;</span>, <span style="color: #4070a0">&quot;AAPL&quot;</span>, <span style="color: #4070a0">&quot;NVDA&quot;</span>, <span style="color: #4070a0">&quot;MSFT&quot;</span>, <span style="color: #4070a0">&quot;OEX.L&quot;</span>]

<span style="color: #60a0b0; font-style: italic">## create Data Frame to add data by column ##</span>
df <span style="color: #666666">=</span> pd<span style="color: #666666">.</span>DataFrame()

<span style="color: #60a0b0; font-style: italic">## code from previous scraper placed in a for loop ##</span>
<span style="color: #007020; font-weight: bold">for</span> t <span style="color: #007020; font-weight: bold">in</span> tickers:

    s <span style="color: #666666">=</span> tickers<span style="color: #666666">.</span>index(t)
    response <span style="color: #666666">=</span> requests<span style="color: #666666">.</span>request(<span style="color: #4070a0">&quot;GET&quot;</span>, <span style="color: #4070a0">&quot;https://uk.finance.yahoo.com/quote/{}&quot;</span><span style="color: #666666">.</span>format(t), headers<span style="color: #666666">=</span>{<span style="color: #4070a0">&#39;USER-AGENT&#39;</span>: <span style="color: #4070a0">&quot;Mozilla/5.0&quot;</span>})
    soup <span style="color: #666666">=</span> BeautifulSoup(response<span style="color: #666666">.</span>content, <span style="color: #4070a0">&quot;html.parser&quot;</span>)

    <span style="color: #007020; font-weight: bold">print</span>(<span style="color: #4070a0">&quot;..................................................&quot;</span>)

    heading_soup <span style="color: #666666">=</span>soup<span style="color: #666666">.</span>find_all(<span style="color: #4070a0">&quot;h1&quot;</span>, class_<span style="color: #666666">=</span><span style="color: #4070a0">&quot;D(ib) Fz(18px)&quot;</span>)
    name_u <span style="color: #666666">=</span> heading_soup[<span style="color: #40a070">0</span>]<span style="color: #666666">.</span>text
    x <span style="color: #666666">=</span> name_u<span style="color: #666666">.</span>split(<span style="color: #4070a0">&quot;, &quot;</span>)
    <span style="color: #007020; font-weight: bold">if</span> <span style="color: #4070a0">&quot; &quot;</span> <span style="color: #007020; font-weight: bold">in</span> x[<span style="color: #40a070">0</span>]:
        x <span style="color: #666666">=</span> name_u<span style="color: #666666">.</span>split(<span style="color: #4070a0">&quot; &quot;</span>)
        name <span style="color: #666666">=</span> x[<span style="color: #40a070">0</span>]
    <span style="color: #007020; font-weight: bold">else</span>:
        name <span style="color: #666666">=</span> x[<span style="color: #40a070">0</span>]
    <span style="color: #007020; font-weight: bold">print</span>(<span style="color: #4070a0">&quot;Name: &quot;</span>, name)


    price_soup <span style="color: #666666">=</span> soup<span style="color: #666666">.</span>find_all(<span style="color: #4070a0">&quot;fin-streamer&quot;</span>, class_<span style="color: #666666">=</span><span style="color: #4070a0">&quot;Fw(b) Fz(36px) Mb(-4px) D(ib)&quot;</span>)
    price <span style="color: #666666">=</span> price_soup[<span style="color: #40a070">0</span>]<span style="color: #666666">.</span>text
    <span style="color: #007020; font-weight: bold">print</span>(<span style="color: #4070a0">&quot;Price: &quot;</span>, price)

    ticker <span style="color: #666666">=</span> t
    <span style="color: #007020; font-weight: bold">print</span>(<span style="color: #4070a0">&quot;Ticker :&quot;</span>, ticker)

    change_soup <span style="color: #666666">=</span> soup<span style="color: #666666">.</span>find_all(<span style="color: #4070a0">&quot;fin-streamer&quot;</span>, class_<span style="color: #666666">=</span><span style="color: #4070a0">&#39;Fw(500) Pstart(8px) Fz(24px)&#39;</span>)
    change_u <span style="color: #666666">=</span> change_soup[<span style="color: #40a070">0</span>]<span style="color: #666666">.</span>text
    x <span style="color: #666666">=</span> change_u<span style="color: #666666">.</span>split(<span style="color: #4070a0">&quot;+&quot;</span>)
    <span style="color: #007020; font-weight: bold">if</span> <span style="color: #007020">len</span>(x) <span style="color: #666666">==</span> <span style="color: #40a070">2</span>:
        change <span style="color: #666666">=</span> x[<span style="color: #40a070">1</span>]
    <span style="color: #007020; font-weight: bold">else</span>:
        change <span style="color: #666666">=</span> x[<span style="color: #40a070">0</span>]

    perc_change_u <span style="color: #666666">=</span> change_soup[<span style="color: #40a070">1</span>]<span style="color: #666666">.</span>text
    x <span style="color: #666666">=</span> perc_change_u<span style="color: #666666">.</span>split(<span style="color: #4070a0">&quot;+&quot;</span>)
    <span style="color: #007020; font-weight: bold">if</span> <span style="color: #007020">len</span>(x) <span style="color: #666666">==</span> <span style="color: #40a070">2</span>:
        x <span style="color: #666666">=</span> x[<span style="color: #40a070">1</span>]<span style="color: #666666">.</span>split(<span style="color: #4070a0">&quot;%&quot;</span>)
    <span style="color: #007020; font-weight: bold">else</span>:
        x <span style="color: #666666">=</span> x[<span style="color: #40a070">0</span>]<span style="color: #666666">.</span>split(<span style="color: #4070a0">&quot;(&quot;</span>)
        x <span style="color: #666666">=</span> x[<span style="color: #40a070">1</span>]<span style="color: #666666">.</span>split(<span style="color: #4070a0">&quot;%&quot;</span>)
    perc_change <span style="color: #666666">=</span> x[<span style="color: #40a070">0</span>]


    <span style="color: #007020; font-weight: bold">print</span>(<span style="color: #4070a0">&quot;Change from open: &quot;</span>, change)
    <span style="color: #007020; font-weight: bold">print</span>(<span style="color: #4070a0">&quot;Percentage change: &quot;</span>, perc_change)
    <span style="color: #007020; font-weight: bold">print</span>(<span style="color: #4070a0">&quot;Adding to dataframe&quot;</span>)

    date <span style="color: #666666">=</span> pd<span style="color: #666666">.</span>to_datetime(<span style="color: #4070a0">&#39;now&#39;</span>, format<span style="color: #666666">=</span><span style="color: #4070a0">&#39;%Y-%m-</span><span style="color: #70a0d0; font-style: italic">%d</span><span style="color: #4070a0"> %H:%M:%S&#39;</span>)
    results <span style="color: #666666">=</span> [date, name, price, ticker, perc_change, change]
    df_t <span style="color: #666666">=</span> pd<span style="color: #666666">.</span>DataFrame(results)
    df_t<span style="color: #666666">.</span>columns <span style="color: #666666">=</span> [<span style="color: #4070a0">&#39;Data&#39;</span>]
    df[s] <span style="color: #666666">=</span> df_t[<span style="color: #4070a0">&#39;Data&#39;</span>]

<span style="color: #60a0b0; font-style: italic">#transpose</span>
df <span style="color: #666666">=</span> df<span style="color: #666666">.</span>T

<span style="color: #60a0b0; font-style: italic">#name columns</span>
df<span style="color: #666666">.</span>columns <span style="color: #666666">=</span> [<span style="color: #4070a0">&#39;date&#39;</span>, <span style="color: #4070a0">&#39;name&#39;</span>, <span style="color: #4070a0">&#39;price&#39;</span>, <span style="color: #4070a0">&#39;ticker&#39;</span>, <span style="color: #4070a0">&#39;percentage_change&#39;</span>, <span style="color: #4070a0">&#39;change&#39;</span>]

<span style="color: #007020; font-weight: bold">print</span>(<span style="color: #4070a0">&quot;..................................................&quot;</span>)
<span style="color: #007020; font-weight: bold">print</span>(<span style="color: #4070a0">&quot;Data Frame: &quot;</span>, df)

<span style="color: #60a0b0; font-style: italic">#save to csv</span>
filename <span style="color: #666666">=</span> <span style="color: #4070a0">&#39;stockPrices.csv&#39;</span>
abspath <span style="color: #666666">=</span> os<span style="color: #666666">.</span>path<span style="color: #666666">.</span>abspath(__file__)
dname <span style="color: #666666">=</span> os<span style="color: #666666">.</span>path<span style="color: #666666">.</span>dirname(abspath)
os<span style="color: #666666">.</span>chdir(dname)
filelocation <span style="color: #666666">=</span> os<span style="color: #666666">.</span>getcwd()
<span style="color: #007020; font-weight: bold">print</span>(<span style="color: #4070a0">&quot;Saving as:  [ &quot;</span> <span style="color: #666666">+</span> filename <span style="color: #666666">+</span> <span style="color: #4070a0">&quot; ]  in:  [ &quot;</span> <span style="color: #666666">+</span> filelocation <span style="color: #666666">+</span> <span style="color: #4070a0">&quot; ] &quot;</span>)
df<span style="color: #666666">.</span>to_csv(filename)
</pre></div>

                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
   <!-- 7. Data Stories  -->
   <div class="cd-panel cd-panel--from-right js-cd-panel-7-Stories">
      <header class="cd-panel__header">
         <h1>7. Data Stories</h1>
         <a href="#0" class="cd-panel__close js-cd-close">Close</a>
      </header>
      <div class="cd-panel__container">
         <div class="cd-panel__content">
            <div class="col-blogEntry panel">
               <!-- Blog entry 1 -->
               <div class="card-blogEntry panel">
                  <div id="thirteenthChart" class="chart center">
                     <script>
                        var myChart13 = "html/json/7_Data_Stories/UKenergyProduction.json";
                        vegaEmbed('#thirteenthChart', myChart13);
                     </script>
                  </div>
                  <div class="blog-details">
                     <h3><b>Data Stories</b></h3>
                  </div>
                  <div class="blog-description">
                     <span class="date">Department for Business, Energy & Industrial Strategy / Office of National Statistics<br>
                        <span class="date">15th November, 2021</span>
                     </span>
                     <h6>
                        Are we moving in the right direction? <br>After attending many talks at the Talking Economics Festival I noticed there was a common thread between many of the talks. Whether the makeup of the UK's energy supply was improving in the context of global warming. During one of these talks it was mentioned that the UK's fossil fuel industry had shrank in the last two decades. This is in fact true. Data from the ONS shows how our production of energy sources such as coal, natural gas and petroleum have seen a substantial fall but still significantly higher in relation to renewable sources.
                     </h6>
                  </div>
               </div>
               <hr>
               <!-- Blog entry 2 -->
               <div class="card-blogEntry panel">
                  <div id="fourteenthChart" class="chart center">
                     <script>
                        var myChart14 = "html/json/7_Data_Stories/UKenergyConsumption.json";
                        vegaEmbed('#fourteenthChart', myChart14);
                     </script>
                  </div>
                  <div class="blog-description">
                     <h6>
                        The shrinking can also be seen in the consumption of energy as our total use falls over the last two and a half decades. Most of the fall is the result of coal which has seen more change than the more stable petroleum and natural gasses. If we are to begin decarbonisation we need to be reducing our dependencies on such sources. These sources are not trending in the direction of a carbon neutral UK.
                     </h6>
                  </div>
               </div>
               <hr>
               <!-- Blog entry 3 -->
               <div class="card-blogEntry panel">
                  <div id="fifthteenthChart" class="chart center">
                     <script>
                        var myChart15 = "html/json/7_Data_Stories/UKenergyConsumptionFocussed.json";
                        vegaEmbed('#fifthteenthChart', myChart15);
                     </script>
                  </div>
                  <div class="blog-description">
                     <h6>This chart also shows how renewables have been stagnant and not seen much growth in the context of our total use.  Coal has reached record lows however.</h6>
                  </div>
               </div>
               <hr>
               
               <!-- Blog entry 4 -->
               <div class="card-blogEntry panel">
                  <div class="blog-details">
                     <h3><b>Data manipulation: STATA</b></h3>
                  </div>
                  <div class="blog-description">
                     <h6>The data required some reshaping which was done in STATA. The do file for reshaping energy production is below:</h6><br>
<!-- HTML generated using hilite.me --><div style="background: #f0f0f0; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%">clear
import delimited using <span style="color: #4070a0">&quot;C:</span><span style="border: 1px solid #FF0000">\</span><span style="color: #4070a0">Users</span><span style="border: 1px solid #FF0000">\</span><span style="color: #4070a0">lhkke</span><span style="border: 1px solid #FF0000">\</span><span style="color: #4070a0">OneDrive - University of Bristol</span><span style="border: 1px solid #FF0000">\</span><span style="color: #4070a0">Documents</span><span style="border: 1px solid #FF0000">\</span><span style="color: #4070a0">Work</span><span style="border: 1px solid #FF0000">\</span><span style="color: #4070a0">Year_3</span><span style="border: 1px solid #FF0000">\</span><span style="color: #4070a0">Data_Science</span><span style="border: 1px solid #FF0000">\</span><span style="color: #4070a0">project</span><span style="border: 1px solid #FF0000">\</span><span style="color: #4070a0">html</span><span style="border: 1px solid #FF0000">\</span><span style="color: #4070a0">json</span><span style="border: 1px solid #FF0000">\</span><span style="color: #4070a0">7_Data_Stories</span><span style="border: 1px solid #FF0000">\</span><span style="color: #4070a0">UKenergyProduction.xls&quot;</span>

rename total totalMt
rename coal coalMt
rename natural naturalMt
rename windsolarandhydro windsolarandhydroMt
rename bioenergywaste bioenergywasteMt
rename nuclear nuclearMt
rename petroleum petroleumMt

reshape long @Mt, i(date) j(<span style="color: #007020; font-weight: bold">type</span><span style="border: 1px solid #FF0000">)</span> string

export delimited using <span style="color: #4070a0">&quot;UkenergyProduction&quot;</span>, replace
</pre></div>

                  </div>
               </div>
               <hr>
            </div>
         </div>
      </div>
   </div>
   <!-- Resource JavaScript -->
   <script src="js/main.js"></script>
</body>

</html>